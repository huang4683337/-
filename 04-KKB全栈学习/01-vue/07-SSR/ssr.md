## 渲染

### 概念

> 渲染：就是将数据和模版组装成 `html`



## 客户端渲染

### 概念

> 客户端渲染模式下，服务端把渲染的静态文件给到客户端，客户端拿到服务端发送过来的文件自己跑一遍 `js`，根据 `JS` 运行结果，生成相应 `DOM`，然后渲染给用户。

> `html`  仅仅作为静态文件，客户端在请求时，服务端不做任何处理，直接以原文件的形式返回给客户端客户端，然后根据  `html` 上的 `JavaScript` ，生成  `DOM`  插入  `html`



### 延申

前端渲染的方式起源于 `JavaScript` 的兴起，`ajax` 的大热更是让前端渲染更加成熟，前端渲染真正意义上的实现了前后端分离，前端只专注于 `视图` 的开发，后端只专注于逻辑的开发，前后端交互只通过约定好的 `API` 来交互，后端提供 `json` 数据，前端循环 `json` 生成 `DOM` 插入到页面中去。



### 利弊

+ 利
  + 网络传输数据量小、减少了服务器压力
  + 前后端分离，局部刷新，无需每次请求完整页面，交互好可实现各种效果
+ 弊
  + 不利于 `SEO` ，爬虫看不到完整的程序源码
  + 首屏渲染慢（渲染前需要下载一堆 `js` 和 `css`等）





## 服务端渲染

### 概念

> 服务端在返回 `html` 之前，在特定的区域，符号里用数据填充（将 `html` 和数据拼接），再给客户端，客户端只负责解析 `HTML` 。

> 服务端渲染的模式下，当用户第一次请求页面时，由服务器把需要的组件或页面渲染成 `HTML` 字符串，然后把它返回给客户端。客户端拿到手的，是可以直接渲染然后呈现给用户的 ` HTML` 内容，不需要为了生成 `DOM` 内容自己再去跑一遍 `JS` 代码。使用服务端渲染的网站，可以说是“所见即所得”，页面上呈现的内容，我们在 `html` 源文件里也能找到。



⽹⻚内容在服务端渲染完成，⼀次性传输到浏览器。

打开⻚⾯查看源码，浏览器拿到的是全部的` dom` 结构

![传统服务端渲染](F:\桌面\传统服务端渲染.png)





### 利弊

+ 利

  + 首屏渲染快
  + 利于 `SEO`
  + 可以生成缓存片段
  + 生成静态化文件
  + 节能（对比客户端渲染的耗电）

+ 弊

  + `JS` 维护困难（跟后端模版业务逻辑绑定）

  + 加载需要整个页面重新加载

    

### 为什么使用服务端渲染

+ 首屏加载快
+ 有利于`SEO`



### 什么情况下使用服务端渲染

对`首屏加载速度`有要求，需要 `SEO` 的网站

比如`掘金`、`简书`、`CSDN`、`知乎`等网站，一搜就能搜出很多东西，`SEO` 做的就很好









jsp ， ph 等都是 srr 



spa ： vue

spa 两个问题：

+ 首屏到达时间按长
+ seo 不友好



服务端渲染 ： vue-server-renderer 和 vue 版本需要保持一致， 否则会报错



服务端的 vue router ，为了避免用户污染，不能使用单实例new router， 需要使用工场模式，创建多实例



服务端渲染不会调 beforMonund 和 mounted ，那是因为服务端不需要在浏览器挂载DOM



服务端为什么不能用 created ？ 因为 created 不能renturn 结果

