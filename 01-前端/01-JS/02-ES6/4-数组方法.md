# ES5 数组方法

## 1、join()

> 数组转字符串，返回一个字符串，原数组不变

```js
var arr = [1,2,3];
var str = arr.join();
// 1,2,3 
```



## 2、push

> 数组末尾追加元素，返回修改后数组长度

```js
var arr = [1,2,3];
var l = arr.push('s');
console.log(arr); // [1,2,3,'s'];
console.log(l);	// 4
```



## 3、pop

> 删除数组末尾元素，返回删除项

```js
var arr = [1,2,3];
var l = arr.pop();
console.log(arr); // [1,2];
console.log(l);	// 3
```



## 4、unshift

> 数组头部添加元素，返回修改后的数组长度

```js
var arr = [1,2,3];
var l = arr.unshift('head');
console.log(arr); // ['head',1,2,3];
console.log(l);	// 4
```



## 5、shift

> 删除数组头部元素，返回删除项

```js
var arr = [1,2,3];
var l = arr.shift();
console.log(arr); // [2,3];
console.log(l);	// 1
```



## 6、splice 插入、替换、删除

> 改变原数组，返回删除的数组，没有删除项，返回空数组

+ 删除数组任意位置元素

  ```js
  var arr = ['a','b','c','d']
  
  // 删除 arr.splice(下标, 删除项数)
  var res = arr.splice(0,1); // ['a']
  ```

+ 指定位置插入

  ```js
  var arr = ['a','b','c','d']
  
  // 替换 arr.splice(起始位置下标, 删除项数, 插入元素)
  var res = arr.splice(0,0,4,5,6);	// []
  
  // arr: [4, 5, 6, "a", "b", "c", "d"]
  ```

+ 替换

  ```js
  var arr = ['a','b','c','d']
  
  // 替换 arr.splice(起始位置下标, 删除项数, 插入元素)
  var res = arr.splice(2,1,11); // ['c']
  
  // arr: ["a", "b", 11, "d"]
  ```

  

## 7、slice 数组裁剪

> 不会改变原数组， 返回裁剪出的数组

```js
var arr = ['a','b','c','d'];
arr.slice(2); // 一个参数，从参数下标开始到结束 ['c','d']

arr.slice(1,3); // 从下标2开始，到下标4结束，不包括4。['b','c']

arr.slice(-3,3); //参数为负数时 = 参数+数组长度(1,3) ['b','c']
```



## 8、forEach 遍历数组，无返回值

> 数组遍历，无返回值。

```js
var arr = [1, 2, 3, 4, 5];
arr.forEach((item, index, arr)=>{
    console.log(item + '|' + index + '|' + (arr === arr));
});
```



## 9、map 返回结果数组

> 遍历数组，返回结果数组

```js
var arr = [1, 2, 3, 4, 5];
var res = arr.map((item, index, arr)=>{
    return item;
});
// [1, 2, 3, 4, 5]
```



## 10、filter 过滤，返回结果数组

> 过滤，返回结果数组

```js
var arr = [1, 2, 3, 4, 5];
var res = arr.filter((item, index, arr)=>{
    return item > 3;
});
// [4,5]
```



## 11、every 所有项都满足某个条件

> 数组中的每项都满足条件时，才会返回 true，否则为 false

```js
var arr = [1, 2, 3, 4, 5];
var res = arr.every((item, index, arr)=>{
    return item > 0;
});
// true
```

```js
var arr = [1, 2, 3, 4, 5];
var res = arr.every((item, index, arr)=>{
    return item > 3;
});
// false
```



## 12、some 有一个项满足条件

> 判断数组中是否有满足条件的，只要有一项满足就返回 true

```js
var arr = [1, 2, 3, 4, 5];
var res = arr.some((item, index, arr)=>{
    return item > 3;
});
// true
```

```js
var arr = [1, 2, 3, 4, 5];
var res = arr.some((item, index, arr)=>{
    return item > 6;
});
// false
```



## 13、sort 排序

> 比较的是字符串，返回一个新数组

```js
[13, 24, 51, 3].sort( (a,b) => a-b )
```



## 14、reverse 翻转

> 改变原数组，返回改变后的数组

```js
var arr = [1,2,3,4]
var res = arr.reverse();
```



## 15、concat 数组拼接

> 数组拼接，返回一个新的数组

```js
var arr = [1,2,3,4]
var res = arr.concat(['a','b','c']);

```



## 16、reduce

```

```





# ES6 数组方法

## 1、... 扩展运算符

**伪数组转数组**

```js
[...document.querySelectorAll('div')]
```



**数组追加、合并**

```js
var res = [...[1,2,3],...['a']]
//  [1, 2, 3, "a"]
```



**复制数组**

```js
var arr = [1,2,3];	
var b = [...arr]
arr.push(4);
// arr [1, 2, 3, 4]
// b [1, 2, 3]
```





## 2、Array.from 伪数组转数组

> 遍历具有 length 属性的类数组（伪数组）
>
> 具有  interator  接口数据类型
>
> 返回一个新数组

```
Array.from(val, map,this)
```

```js
// 伪数组转数组
let lis = document.querySelectorAll('li');
Array.from(lis); // [li,li]
```



```js
// 第二个参数 类似于map方法
Array.from([1, 2, 3], (x) => x * x); // ['1','4','9']
等同于 Array.from([1,2,3]).map(x => x * x);

// 创建一个包含 0-99 的数组
Array.from({length:100},(item,index)=> index); // [0,1,2,...,99]
```



## 3、Array.of 将一组值转数组

> 将一组值转换为数组，为了弥补 Array() 的不足

```
Array.of(val1,val2...)
```

```js
// 为了解决 ES5 中 Array()的不足
Array(2); // [,] 占据空间的空值

Array.of() // []
Array.of(undefined) // [undefined]
Array.of(1,2) // [1,2]
Array.of('1',2) // ['1',2]
```

```js
// 实现 Array.of 方法
function ArrayOf(){
  return [].slice.call(arguments);
}
```



## 3、copyWithin

> 将指定位置的成员复制到其他位置并且覆盖。 返回当前数组。

```
copyWithin(target,start,end) 
```

```js
// 将3号位复制到0号位
[1, 2, 3, 4, 5].copyWithin(0, 3, 4)
// [4, 2, 3, 4, 5]

// -2相当于3号位，-1相当于4号位 => 负数+length = 对应位置
[1, 2, 3, 4, 5].copyWithin(0, -2, -1)
// [4, 2, 3, 4, 5]

// 将3号位复制到0号位
[].copyWithin.call({length: 5, 3: 1}, 0, 3)
// {0: 1, 3: 1, length: 5}

// 将2号位到数组结束，复制到0号位
let i32a = new Int32Array([1, 2, 3, 4, 5]);
i32a.copyWithin(0, 2);
// Int32Array [3, 4, 5, 4, 5]

// 对于没有部署 TypedArray 的 copyWithin 方法的平台
// 需要采用下面的写法
[].copyWithin.call(new Int32Array([1, 2, 3, 4, 5]), 0, 3, 4);
// Int32Array [4, 2, 3, 4, 5]

```



## 4、find 查找第一个符合条件的成员

> 查找第一个符合条件的成员，返回这个成员
>
> 第二个参数，改变回调函数的 this 指向

```
find(cb,bind_this)
```

```js
// 只使用第一个参数
const res = [1,4,5].find( (val, index, arr)=> val>1 ); 
// 4

// 使用第二个参数 将回调函数 this 指向 person 对象
function f(v){
  return v > this.age;
}
let person = {name: 'John', age: 20};
[10, 12, 26, 15].find(f, person);    // 26
```



## 5、findIndex 查找第一个符合条件的成员

> 查找第一个符合条件的索引
>
> 第二个参数，改变回调函数的 this 指向

```
findIndex(cb,bind_this)
```

```js
var list = [
  {name:'name1',id:1},
  {name:'name2',id:2},
  {name:'name3',id:3},
]

//接受一个函数作为参数
var itemIndex = list.findIndex( (value, index)=>{
  return value.id === 2;  // 当某个遍历项符合条件时 终止遍历 且返回对应的项的索引，否则返回undefined
})

console.log(itemIndex); // 1
```



## 6、fill 填充数组

> 使用给定值填充数组。

```
fill(val, start, end) 
```


```js
// 用于初始化数组
['a', 'b', 'c'].fill(7)	
// [7, 7, 7]

new Array(3).fill(7)	// [7, 7, 7]


// 三个参数使用
['a', 'b', 'c'].fill(7, 1, 2)		// ['a', 7, 'c']
```



## 7、entries，keys 和 values

> 三者都是用来遍历数组，返回的是一个遍历器对象（Interator）。
>
> `keys()` 用来遍历键名 
>
> `values()`用来遍历键值 
>
>  `entries()`用来遍历键值对

```js
for (let index of ['a', 'b'].keys()) {
  console.log(index);  // 0 1
}


for (let elem of ['a', 'b'].values()) {
  console.log(elem);  // 'a' 'b'
}
// 'a'
// 'b'

for (let [index, elem] of ['a', 'b'].entries()) {
  console.log(index, elem); // 0 "a" ; 1 "b"
}
```



## 8、includes 数组是否包含某个值

> 查看是否包含某个值，返回一个布尔值

```
includes(val)
```

```js
// includes : 判断某值是否存在与数组;
// indexOf : 判断某值第一次出现在数组位置; 判断规则 ===, 所以会得出 [NaN].indexOf(NaN)为 -1

[1, 2, 3].includes(2)     // true
[1, 2, 3].includes(4)     // false
[1, 2, NaN].includes(NaN) // true
```

```js
// 判断浏览器是否兼容 includes()

const contains = (() =>
  Array.prototype.includes
    ? (arr, value) => arr.includes(value)
    : (arr, value) => arr.some(el => el === value)
)();
contains(['foo', 'bar'], 'baz'); // => false
```



## 9、flat 解开多维数组

> flat 将多维数组转成一维数组。  返回新数组
>
> 接收一个参数，代表是几维数组

```js
[1, 2, [3, 4]].flat()		// [1, 2, 3, 4]

[1, 2, [3, [4, 5]]].flat(2)		// [1, 2, 3, 4, 5]

[1, 2, [3, [4, 5]]].flat(Infinity)		// [1, 2, 3, 4, 5]
```





## 10、flatMap

> 对所有成员执行一个 Map 方法，然后执行 flat 方法，返回一个新数组。
>
> 只能执行二维数组以内的

```js
// 相当于 [[2, 4], [3, 6], [4, 8]].flat()
[2, 3, 4].flatMap((x) => [x, x * 2])	// [2, 4, 3, 6, 4, 8]
```



## 11、空位

> 数组有长度但是没有任何值。 
>
> js 对空位的处理不一样，建议不要出现空位

```js
// es6 会将空位处理成 undefined
```

