

+ css 样式、静态资源

  + css 样式：

    + less |sass

    + postcss（css扩展： 压缩、兼容）

    + 抽离css独立文件

  + 静态资源（图片字体）

+ html 

+ javaScript

  js --> vue  、 react 、 es6+ --> es5 、ts 转换 



```js
less-loader : 将 less 转化为 css语法

css-loader：将css 语法进行序列化，打包到js文件

style-loader：将序列化的css通过style在`<body>`中引入
```



[postcss    github官网](https://github.com/postcss/postcss/blob/master/docs/README-cn.md)

```js
postcss 在 css-loader 之前使用

postcss也需要配置 -- 根目录添加 postcss.config.js
```

## css抽离

`minicss-extract-plugin`

+ 这是一个插件需要在 plugin 中 new 一下进行配置

+ module 中的 css-loader 需要替换成 miniCssExtractPlugin.loader 

```js
/{
 “”“”“”“”“”“”
 test: /\.less$/,
  use:[
    loader:'MiniCssExtractPlugin.loader',	// 使用minicss-extract-plugin抽离css
    options:{
      // css中通过 background:url('xxx.png') 引入的文件
    	// 通过插件对图片编译处理后的地址拼接 xxx
    	// 保证编译后能文件路径不会出错
    	// background:url('../xxx.png')
      publicPath:'../'		
    },
    "css-loader",
    "postcss-loader",
    "less-loader"
  ]
}
```



## 使用 HtmlWebpackPlugin 在 html 模板中自动引入css、js 地址拼接

+ output 中修改所有

```js
output:{
  publicPath:'http://www.baidu.com'
}

// 打包后在 index.html 中
// <script src="http://www.baidu.com/我们在插件中配置的导报后的dist路径"></script>
```

+ 在 moudule 中配置

  ```js
  {
    test: /\.css$/,
    use:{
      loader:'xxxx',
      options:{
        publicPath:'../'		// 编译后的css文件在 html中引入时会添加 ../+编译后地址
      }
    }
  }
  ```

  

## 自定义loader

+ 写一个自定义 loader
+ 自定义loader处理



--------



## 配置当前工程的 npm 源

```shell
# 根目录下新建 .npmrc

# 添加内容
registry=https://registry.npm.taobao.org
```



## css 处理

### 准备工作

```css
/* src/css/index.css */
body{
    background-color: red;
}
```

```js
// src/index.js
import css from '.css/index.css'
console.log("hello webpack");
```

```shell
$ npm i style-loader css-loader -D
```

```js
// webpack.config.js 中配置 style-loader css-loader

// package.json 中添加打包命令
"scripts": {
  ...
  "dev": "webpack"
},
```

```shell
$ npm run dev

# 新建 dist/index.html
# 引入打包后的 index.js <script src="./index.js"></script>
```



### less 的处理

```less
// src/css/index
// index.js 中引入此文件
body{
    background-color: blanchedalmond;
    div{
        width: 200px;
        height: 200px;
        background-color: greenyellow;
    }
}
```

```shell
# 安装
$ npm install --save-dev less-loader less

# 用于将 less 转化为 css
```

```js
// webpack.config.js
{
    test: /\.less$/,
    use: ["style-loader", "css-loader","less-loader"]
},
```

```shell
# 执行构建

# 新建 dist/index.html 引入 <script src="./index.js"></script>

# 打开浏览器查看
```



### sass 的处理

```shell
$ npm install sass-loader node-sass webpack --save-dev

# 其他操作同上
```



### postcss

[postcss官网gitHub](https://github.com/postcss/postcss/blob/master/docs/README-cn.md)

```shell
# 安装
$ npm i postcss postcss-loader -D
```

